{"version":3,"sources":["webpack:///./src/lib/components/DashPdfComponents.react.js"],"names":["DashPdfComponents","enableAnnotationAPIs","includePDFAnnotations","annotManager","setState","annotationManager","viewSDKClient","ViewSDKClient","ready","then","state","previewFilePromise","previewFile","props","id","viewerConfig","apiKey","fileUrl","fileName","fileId","adobeViewer","getAnnotationManager","setAnnotationManager","highlightsArr","length","addAnnotations","result","console","log","error","customFlags","showCommentsPanel","downloadWithAnnotations","printWithAnnotations","setConfig","undefined","loadPdf","key","label","Component","defaultProps","propTypes","PropTypes","string","array","setProps","func"],"mappings":"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","file":"8fdc76f-main-wps-hmr.js","sourcesContent":["import React, {Component} from 'react';\nimport ViewSDKClient from '../ViewSDKClient';\nimport PropTypes from 'prop-types';\nimport \"../style.css\";\nimport CustomPdfActions from \"../CustomPdfActions\";\nimport { annotationExample } from '../annotationExample';\n\n/**\n * PDF componetn using the Adobe Embed API. Takes file url location and json annotations.\n */\nexport default class DashPdfComponents extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            annotationManager: undefined,\n            fileUrl: \"\",\n            highlightsArr: undefined\n        };\n    }\n\n    viewerConfig = {\n        /* Enable commenting APIs */\n        enableAnnotationAPIs: true,  /* Default value is false */\n        includePDFAnnotations: false // If true, annotations are saved to PDF buffer\n    };\n\n    setAnnotationManager = annotManager => {\n        this.setState({\n            annotationManager: annotManager\n        });\n    }\n\n    loadPdf = () => {\n\n        ////// load the embed API script\n        // const url = \"https://documentcloud.adobe.com/view-sdk/main.js\";\n        // const script = document.createElement(\"script\");\n        // script.src = url;\n        // script.async = true;\n        // document.body.appendChild(script);\n        \n        const viewSDKClient = new ViewSDKClient();\n        viewSDKClient.ready().then(() => {\n            /* Invoke the file preview and get the Promise object */\n            this.state.previewFilePromise = viewSDKClient.previewFile(\n                this.props.id, \n                this.viewerConfig, \n                this.props.apiKey, \n                this.props.fileUrl, \n                this.props.fileName, \n                this.props.fileId\n            );\n\n            /* Use the annotation manager interface to invoke the commenting APIs */ \n            this.state.previewFilePromise.then(adobeViewer => {\n                adobeViewer.getAnnotationManager().then(annotManager => {\n\n                    this.setAnnotationManager(annotManager);\n                    if (this.state.highlightsArr.length != 0) {\n                        annotManager.addAnnotations(this.state.highlightsArr)\n                        // annotManager.addAnnotationsInPDF(this.state.highlightsArr)            \n                            .then(result => {\n                                console.log(\"Success!!! Annotations added\", result);\n                            })\n                            .catch(error => {\n                                console.log(error);\n                            });\n                    }\n\n                    /* Set UI configurations */\n                    const customFlags = {\n                        // showToolbar: false,   /* Default value is true */\n                        // dockPageControls: false, /* Default value is true */\n                        showCommentsPanel: false,  /* Default value is true */\n                        downloadWithAnnotations: true,  /* Default value is false */\n                        printWithAnnotations: true,  /* Default value is false */\n                    };\n                    this.state.annotationManager.setConfig(customFlags);\n                });\n            });\n        });\n    }\n    \n    componentDidMount() {\n        this.loadPdf();\n    }\n\n    render() {\n\n        const {\n            key,\n            id,\n            label,\n            apiKey,\n            fileUrl,\n            fileName,\n            fileId,\n            highlightsArr\n        } = this.props;\n\n        this.state.fileUrl = fileUrl;\n        this.state.highlightsArr = highlightsArr; \n        // console.log(this.state.highlightsArr);\n\n        return (\n            // <Provider theme={defaultTheme} colorScheme=\"light\">\n            <div className = \"pdf-view-container\">\n                <div id={id} className=\"pdf-view full-window-div\"></div>\n                {\n                    this.state.annotationManager &&\n                    <CustomPdfActions\n                        annotationManager={ this.state.annotationManager }\n                    />\n                }\n            </div>\n            // </Provider>\n        );\n\n    }\n\n    // render() {\n    //     const {id, label, setProps, value} = this.props;\n\n    //     return (\n    //         <div id={id}>\n                \n    //             <div id=\"pdf-div\" className=\"full-window-div\">HI!</div> \n\n    //             <h1>HI!</h1>\n    //             ExampleComponent: {label}&nbsp;\n    //             <input\n    //                 value={value}\n    //                 onChange={\n    //                     /*\n    //                      * Send the new value to the parent component.\n    //                      * setProps is a prop that is automatically supplied\n    //                      * by dash's front-end (\"dash-renderer\").\n    //                      * In a Dash app, this will update the component's\n    //                      * props and send the data back to the Python Dash\n    //                      * app server if a callback uses the modified prop as\n    //                      * Input or State.\n    //                      */\n    //                     e => setProps({ value: e.target.value })\n    //                 }\n    //             />\n    //         </div>\n\n    //     );\n    // }\n\n}\n\nDashPdfComponents.defaultProps = {};\n\nDashPdfComponents.propTypes = {\n\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    key: PropTypes.string,\n\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    id: PropTypes.string,\n\n    /**\n     * A label that will be printed when this component is rendered.\n     */\n    label: PropTypes.string,\n\n    /**\n     * Api key for authentication\n     */\n     apiKey: PropTypes.string,\n\n    /**\n     * URL to file that will be displayed\n     */\n     fileUrl: PropTypes.string,\n\n    /**\n     * file name\n     */\n     fileName: PropTypes.string,\n\n     /**\n     * unique file id\n     */\n    fileId: PropTypes.string,\n\n    /**\n     * Annotations that will appear as highlights\n     */\n     highlightsArr: PropTypes.array,\n\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func\n};"],"sourceRoot":""}